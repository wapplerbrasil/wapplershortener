<!-- Wappler include head-page="layouts/main" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="index" appconnect="local" class="bg-geral" -->
<dmx-serverconnect id="api_get_url_views" url="/api/links/url_show_views" dmx-param:url="form1.url_curta.value"></dmx-serverconnect>
<header class="pt-3">
    <div class="container">
        <div class="row">
            <div class="text-center col-11 text-md-start">
                <a><img src="/assets/images/logo.png"></a>
            </div>
        </div>
    </div>
</header>
<main>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 col-md-5 ps-0 order-2 order-md-1">
                <img src="/assets/images/Ilustracao.png" class="img-fluid">
            </div>
            <div class="col-12 col-md-7 offset-0 order-md-2">
                <div class="row align-items-center justify-content-center justify-content-md-start" style="min-height: 70%;">
                    <div class="col-10 mt-5 col-lg-8 col-xl-7 col-xxl-5">
                        <h4><b>Digite sua URL</b></h4>
                        <form id="form1" method="post" is="dmx-serverconnect-form" action="/api/links/add_link">
                            <div class="form-group md-3">
                                <input type="text" class="form-control" id="url_full" name="url_full" aria-describedby="input1_help" placeholder="Ex: https://www.seudominio.com.br/produto...">
                            </div>
                            <button id="btn1" class="btn w-100 btn-primary mt-2" type="submit"><i class="fas fa-link fa-fw"></i>Gerar url curta</button>
                            <div class="row mt-3" is="dmx-if" id="conditional1" dmx-bind:condition="form1.data.url_pronta">
                                <div class="col">
                                    <input type="text" class="form-control" name="texto" id="texto" dmx-bind:value="form1.data.url_pronta" />
                                    <button class="btn btn-primary mt-2" onclick="copiarTexto()"><i class="far fa-copy fa-fw"></i>Copiar</button>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col">
                                    <p class="mb-0">Digite a <b>URL</b> para ver quantas visitas teve.</p>
                                    <input id="url_curta" name="url_curta" type="text" class="form-control" placeholder="Digite a URL...">
                                    <p class="mt-2" dmx-show="api_get_url_views.data.query">Esta <b>URL</b> teve (<b>{{api_get_url_views.data.query.views}}</b>) visitas.</p>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<meta name="ac:route" content="/">
<script>
    function copiarTexto() {
        let textoCopiado = document.getElementById("texto");
        textoCopiado.select();
        textoCopiado.setSelectionRange(0, 99999)
        document.execCommand("copy");
        alert("Link copiado: " + textoCopiado.value);
    }
</script>